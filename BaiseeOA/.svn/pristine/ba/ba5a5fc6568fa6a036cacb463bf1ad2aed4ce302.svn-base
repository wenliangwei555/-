<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
	<head th:include="commonTemplate :: header">
	</head>
	<body class="bgcolor-body">
		<div id="page">
			<div th:include="commonTemplate :: headerDiv"></div>
			<div id="content" class="layout">
				<div class="grid-s5m0">
					<div class="col-main">
						<div class="main-wrap">
							<div class="skin-box">
								<div class="skin-box-bd">
									<div class="cur-position">
										<!-- <span><a href="javascript:void(0)">信息管理</a> </span>
										<span>&gt;</span> -->
										<span><a th:href="@{user/toUserList.ht}">保险管理</a> </span>
										<span>&gt;</span>
										<span><a href="javascript:void(0)">保险办理</a> </span>
									</div>
									<!-- ==================================== 页面内容开始 ============================= -->
									<div class="cont-box">
										<div class="JsW skin-box-bd" data-widget-type="tab" data-widget-config="{'activeIndex':0}">
											<div class="skin-bd-box">
												<div class="content-box-menu">
													<ul >
														<li class="active">
															<a href="javascript:void(0)"> <span >填写信息</span> <span class="separator"></span> </a>
														</li>
														<!-- <li>
															<a href="javascript:void(0)" > <span onclick="notSupJump();">附加信息</span> <span class="separator"></span> </a>
														</li>
														<li>
															<a href="javascript:void(0)"><span onclick="notEduJump();">教育信息</span> <span class="separator"></span> </a>
														</li>
														<li>
															<a href="javascript:void(0)"> <span onclick="notWorkJump();">履历信息</span> <span class="separator"></span> </a>
														</li>
														<li>
															<a href="javascript:void(0)"> <span onclick="notFamJump();">家庭信息</span> <span class="separator"></span> </a>
														</li> -->
														
													</ul>
												</div>
												<div class="list-table">
													<div class="list-table-cont">
														<div class="table6">
														<!-- onsubmit="return false;" -->
															<form id="basefrm" name="basefrm"  th:action="@{insurance/toAddStuInsurance.ht}" method="post"  >
																<input type="hidden" name="id" id="id" th:value="${stuInsuInfo.id}"/>
																<table>
																	<tr>
																		<td>
																			<div class="left">
																				<div class="td1">
																					<span class="red">*</span><span>学生姓名：</span>
																				</div>
																				<div class="td2">
																					<span>
																						<span >
																							<input type="text" class="radius3 input" id="stuName" name="stuName" th:value="${stuInsuInfo.stuName}" style="border:0;" readonly="readonly"/>
																						</span>
																					</span>
																				</div>
																			</div>		
																		</td>
																	</tr>
																	
																	<tr>
																		<td>
																			<div class="left">
																				<div class="td1">
																					<span class="red">*</span><span>学生班级：</span>
																				</div>
																				<div class="td2">
																					<span>
																						<span >
																							<input type="text" class="radius3 input" id="className" name="className" th:value="${stuInsuInfo.className}" style="border:0;width:28px;" readonly="readonly" />班
																						</span>
																					</span>
																				</div>
																			</div>		
																		</td>
																	</tr>
																	<tr>
																		<td>
																			<div class="left">
																				<div class="td1">
																					<span class="red">*</span><span>保单号：</span>
																				</div>
																				<div class="td2">
																					<span>
																						<span >
																							<input type="text" class="radius3 input" id="iNo" name="iNo" th:value="${stuInsuInfo.iNo}" placeholder="请输入保单号" />
																						</span>
																					</span>
																				</div>
																			</div>		
																		</td>
																	</tr>
																	<tr>
																		<td>
																			<div class="left">
																				<div class="td1">
																					<span class="red">*</span><span>入保时间：</span>
																				</div>
																				<div class="td2">
																					<span>
																						<span >
																							<input type="text" class="radius3 input" id="iInTime" name="iInTime" th:value="${stuInsuInfo.iInTime}" onfocus="WdatePicker({dateFmt:'yyyy-MM-dd',readOnly:true})" placeholder="请选择入保时间" />
																						</span>
																					</span>
																				</div>
																			</div>		
																		</td>
																	</tr>
																<!-- 	<tr>
																		<td>
																		<div class="left">
																			<div class="td1">
																				<span class="red">*</span><span>到期时间：</span>
																			</div>
																			<div class="td2">
																				<span>
																					<span >
																						<input type="text" class="radius3 input" id="iOutTime" name="iOutTime" th:value="${stuInsuInfo.iOutTime}" onfocus="WdatePicker({dateFmt:'yyyy-MM-dd',readOnly:true})" placeholder="请选择到期时间" />
																					</span>
																				</span>
																			</div>
																		</div>		
																		</td>
																	</tr> -->
																	<tr>
																		<td>
																			<div class="left">
																				<div class="td1">
																					<span class="red">*</span><span>保险公司：</span>
																				</div>
																				<div class="td2">
																					<span>
																					<select name="iComName"  class="radius3" id="iComName"  style="width: 150px;margin-right: 30px;margin-top: 2px;" >
																						<option value="">选择保险公司</option>
																						<option th:selected="${stuInsuInfo.iComName == dict.dictDestination}" th:each="dict:${dicts}" th:value="${dict.dictDestination}" th:text="${dict.dictDestination}" ></option>
																					</select>
																					</span>	
																				</div>
																			</div>
																		</td>
																	 </tr>
																	 <tr>
																		<td>
																		<div class="left">
																			<div class="td1">
																				<span class="red">*</span><span>备注：</span>
																			</div>
																			<div class="td2">
																				<span>
																					<textarea rows="3" cols="20" id="remarks" name="remarks" th:text="${stuInsuInfo.remarks}" placeholder="*填写备注"></textarea>
																				</span>
																			</div>
																		</div>		
																		</td>
																	</tr>
																</table>
																<div class="redbutton control-button JsW"  >
																<span class="grey"> 
																	<input value="返回上级" type="button" onclick="returnBack();" class="radius5 button ks-pop-close1" /> 
																</span>
																<span baisee:ctrl="BXGL_BDBL"> 
																	<input th:if="${stuInsuInfo.status == '1'||stuInsuInfo.status == '3'}"  value="确定保存" type="submit"   class="radius5 button ks-pop-close1" />
																</span>
																	<!-- onclick="submit()" -->
																</div>
															</form>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- ============================= 页面内容 结束============================= -->
								</div>
							</div>
						</div>
					</div>
					<div th:include="commonTemplate :: leftMenus"></div>
				</div>
			</div>
			<div th:include="commonTemplate :: footer"></div>
		</div>
		<div th:include="commonTemplate :: processBar" />
		<script th:inline="javascript">
		
		$(function () {
				setValidate($("#basefrm"),{
					rules: {
						iNo:{required: true,maxlength: 20,minlength: 13,insuranceNumber: true,
							/* remote:{       
					              type : "POST",
					              url : [[@{/insurance/checkInsuranceNumber.ht}]],
					              cache:true,
					              async: true,
					              data : {
					            	 "id" : function(){return $("#id").val();},
					            	 "iNo" : function(){return $("#iNo").val();}
					              },
					          } */	
						},
						iInTime:{required: true},
						iComName:{required:true},
					},
					messages:{
						iNo:{required: "*填写保险号",maxlength: "*最大长度20位字符",minlength:"*最小长度13位字符"},
						iInTime:{required:"*填写入保时间"},
						iComName:{required:"请选择保险公司!"},
					}
						
				})
				
				/*====================================== 保险单号校验  数字和字母=============================== */
				$.validator.addMethod("insuranceNumber", function(value, element) { 
					var insuranceNumber = /^[A-Za-z0-9]+$/; 
					return this.optional(element) || (insuranceNumber.test(value)); 
					}, "输入正确的保险单号！"); 
				
				/*====================================== 入保时间  到期时间 ====================================
				$.validator.addMethod("endDate",function(value,element){
		            var enrollments = $("#iInTime").val();
		            var graduations = $("#iOutTime").val();
		            var reg = new RegExp('-','g');
		            enrollments = enrollments.replace(reg,'/');//正则替换
		            graduations = graduations.replace(reg,'/');
		            enrollments = new Date(parseInt(Date.parse(enrollments),10));
		            graduations = new Date(parseInt(Date.parse(graduations),10));
		            if(enrollments>graduations){
		                return false;
		            }else{
		                return true;
		            }
		        },"到期时间必须大于入保的时间");*/
				
				/*======================================= 校验是否选择保险公司 =================================*/
				$("#iComName").select2({
					placeholder : "请选择保险公司!"
				});
			})
			
			
			function returnBack() {
				var url = [[@{'/insurance/toHandleList.ht'}]];
				locationHref(url);	
			}
		
			function submit() {
				$("#basefrm").submit();
			}
		</script>
	</body>
</html>